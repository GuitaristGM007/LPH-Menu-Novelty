<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <link rel="shortcut icon" type="image/x-icon" href="header-logo.png">
    <title>LPH Goes Green! View The Menu Novelty</title>
    <link rel = "stylesheet" type = "text/css" href = "index.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<div class="header">

    <div class="logo-section">
        <div class="logo">
            <a rel="htmlpage" href="index.html">
                <img alt="logo" class="logo-image" src="logo.png">
            </a>
        </div>
        <div class="legacyText">
            Since 2011
        </div>
    </div>

    <div class="title-section">
        Welcome to The Menu Novelty!
    </div>

    <div class="stamp-section">
        <div class="stamp">
            <img alt="stamp" class="stamp-image" src="stamp.png">
        </div>
    </div>

</div>

<main class="download-section">

    <div class="preview-section">
        <div class="preview-image">
            <a href="LPH Goes Green! Greater Quantity - The Menu Novelty.pdf" download>
                <img id="menu-download-image" class="preview-image" src="front-page.png" alt="Menu Preview">
                <div class="hover-text">Download</div>
            </a>
        </div>
    </div>

    <div class="text-section">

        <div class="text-title-section">
            <div class="text-title">
                LPH Goes Green!
            </div>
        </div>

        <div class="text-description-section">
            <div class="text-description">
                The Menu Novelty holds all the 'homemade' paranthas, veggies, drinks, pasta, noodles, rice, sandwiches, etc. to
                provide you with a wholesome meal!
            </div>
        </div>

        <div class="download-button">
            <a href="LPH Goes Green! Greater Quantity - The Menu Novelty.pdf" download>
                <button id="menu-download-button" class="preview-button">
                    Download The Menu
                </button>
            </a>
        </div>

    </div>

</main>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
  import { getAnalytics, logEvent } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js";
  import { getDatabase, ref, runTransaction, set } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyAvWlnAUx3hFEkksLzvTTnUWsn90OVPqFI",
    authDomain: "lph-server-website.firebaseapp.com",
    databaseURL: "https://lph-server-website-default-rtdb.firebaseio.com",
    projectId: "lph-server-website",
    storageBucket: "lph-server-website.firebasestorage.app",
    messagingSenderId: "200401032111",
    appId: "1:200401032111:web:d0ccd06a0415e97657955a",
    measurementId: "G-9B9SR4TZVY"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getDatabase(app);

  logEvent(analytics, "site_visit", { source: "menu_page" });

  window.addEventListener("DOMContentLoaded", () => {
  runTransaction(ref(db, "stats/total_visits"), n => (n || 0) + 1);
});

  document.getElementById("menu-download-image").addEventListener("click", () => {
  logEvent(analytics, "image_download", { method: "image" });

    runTransaction(ref(db, "stats/image_downloads"), n => (n || 0) + 1);
    runTransaction(ref(db, "stats/total_clicks"), n => (n || 0) + 1);
  });

  document.getElementById("menu-download-button").addEventListener("click", () => {
  logEvent(analytics, "button_download", { method: "button" });

  runTransaction(ref(db, "stats/button_downloads"), n => (n || 0) + 1);
  runTransaction(ref(db, "stats/total_clicks"), n => (n || 0) + 1);
});

</script>

</body>

</html>
